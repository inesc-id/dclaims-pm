<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Hypercerts Playground</title>
</head>
<body style="padding: 20px; font-family:Arial">

<p>Send a full JSON</p>

<input id="jsonid" type="text" name="json_input"><br>
<input name="buttonExecute" onclick="sendMessage(document.getElementById('jsonid').value)" type="button" value="Execute" />

<p> Send the IPFS Link to the cert</p>
<input id="jsonid2" type="text" name="json_input2"><br></st>
<input name="buttonExecute" onclick="sendGetMessage(document.getElementById('jsonid2').value)" type="button" value="Execute" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script type="text/JavaScript">
    function sendMessage(name){
        var jsonfile = jQuery.parseJSON(name);
        var data = JSON.stringify(jsonfile);

        var xhr = new XMLHttpRequest();
        xhr.withCredentials = false;

        xhr.addEventListener("readystatechange", function () {
            if (this.readyState === 4) {
                console.log(this.responseText);
            }
        });

        xhr.open("POST", "http://146.193.41.153:8090/");
        xhr.setRequestHeader("content-type", "application/json");
        xhr.send(data);
    }

    function sendGetMessage(name){
      var data = null;

      var xhr = new XMLHttpRequest();
      xhr.withCredentials = false;

      xhr.addEventListener("readystatechange", function () {
        if (this.readyState === 4) {
          alert(this.responseText);
        }
      });
//application/javascript
      xhr.open("GET", "http://146.193.41.153:8091/promise?ipfsAddr="+name);
      xhr.setRequestHeader("content-type", "application/javascript");

      //xhr.setRequestHeader("postman-token", "9478c587-f2da-2c03-fe1a-5747306ae18f");

      xhr.send(data);
    }

</script>








<p id="p1">Use this JSON for testing purposes:</p>
<p> {
    "document":{
    "signature":"IN1CKNm9VCSQHLAKF2cOf6E9hNM080yM8gEtkkdjA0oYIfogPy3ho9ytorgN1MdqonZ6IO/8XCk2vWxOub30XFc=",
    "recipient":{
    "givenName":"Arya",
    "publicKey":"mgCNaPM3TFhh8Yn6U6VcEM9jWLhQbizy1x",
    "type":"email",
    "identity":"aryaxyz@starkxyz.com",
    "familyName":"Stark",
    "revocationKey":"mhjWi9Y3VhjcPmg2hcdjWBFZFTHtKuWFL2",
    "hashed":false
    },
    "@context":"https://w3id.org/blockcerts/v1",
    "type":"CertificateDocument",
    "assertion":{
    "issuedOn":"2016-09-29",
    "id":"http://certificates.gamoeofthronesxyz.org/f813349f-1385-487f-8d89-38a092411fa5",
    "image:signature":"fdfdf",
    "type":"Assertion",
    "uid":"f813349f-1385-487f-8d89-38a092411fa5"
    },
    "certificate":{
    "language":"en-US",
    "id":"http://certificates.gamoeofthronesxyz.org/criteria/2016/08/got.json",
    "name":"Game of Thrones Character",
    "image":"fdfdf",
    "issuer":{
    "url":"http://www.blockcerts.org/mockissuer/",
    "email":"fakeEmail@gamoeofthronesxyz.org",
    "id":"http://www.blockcerts.org/mockissuer/issuer/got-issuer.json",
    "name":"Game of thrones issuer",
    "type":"Issuer",
    "image":"jkjk"
    },
    "description":"This certifies that the named character is an official Game of Thrones character.",
    "type":"Certificate"
    },
    "verify":{
    "attribute-signed":"uid",
    "type":"ECDSA(secp256k1)",
    "signer":"http://www.blockcerts.org/mockissuer/keys/got_public_key.asc",
    "ipfs_files":{
    "rules":"12344567",
    "proofs":"78889"
    }
    }
    },
    "@context":"https://w3id.org/blockcerts/v1",
    "type":"BlockchainCertificate",
    "receipt":{
    "anchors":[
    {
    "sourceId":"2b4159561af88c66f554dabc0d94f54d2e4d5ae0446881fc926678ac49931b1e",
    "type":"BTCOpReturn"
    }
    ],
    "@context":"https://w3id.org/chainpoint/v2",
    "type":"ChainpointSHA256v2",
    "proof":[
    {
    "left":"bcd1a5068515c13b5d98bfaac2d4291f9ced788fd85fec4cef057c4c2a5c7cdb"
    }
    ],
    "merkleRoot":"362518fa64236bfead72ea3ea934198120cafd194b71d550fc5c9f4fd1b4caaa",
    "targetHash":"cd3842e8b3656164ef87bc330f88e8820ae9708962be564bd36ede4f035f04dc"
    }
    }</p>
</body>
</html>